
<h1>Viewing restaurant</h1>
<script type="text/javascript">
	$(function(){

		// Delete User
		$('.button-delete').click(function(){
			
			var restaurantId = this.id;
			
			$("#dialog-confirm" ).dialog({
				resizable: false,
				height:180,
				width:400,
				modal: true,
				buttons: {
					"Delete": function() {
						$( this ).dialog( "close" );
						$.ajax({
							   type: "DELETE",
							   url: "/restaurant/" + restaurantId,				   
							   success: function(msg) {				   	  
								  window.location.replace("/restaurants");
							   },
							   error: function(msg) {					  
								  alert("I was unable to delete the restaurant - something has gone wrong, apologies!");
							   }
						});
					},
					Cancel: function() {
						$( this ).dialog( "close" );
					}
				}
			});			
			
		});
		
	});
</script>
<div id="dialog-confirm" style="display: none;" title="Delete restaurant?">
	<p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>This will be permanently deleted and cannot be recovered. Are you sure?</p>
</div>
<%- partial('../messages') %>
<table>
	<tr>
  		<th>ID</th><td><%= restaurant.id %></td>
  	</tr>
  	<tr>
  		<th>Name</th><td><%= restaurant.name %></td>
  	</tr> 	
  	<tr>
  		<th>Phone</th><td><%= restaurant.phone %></td>
  	</tr> 	
  	<tr>
  		<th>Latest Deal</th><td><%= restaurant.latest_deal %></td>
  	</tr> 	
  	<tr>
  		<th>Address</th><td><%= restaurant.address %></td>
  	</tr> 	
  	<tr>
  		<th>Latitude</th><td><%= restaurant.loc.lat %></td>
  	</tr> 	
  	<tr>
  		<th>Longitude</th><td><%= restaurant.loc.lng %></td>
  	</tr> 	
</table>
<a class="button-edit" href="/restaurant/edit/<%= restaurant.id %>" title="Edit restaurant ...">
	Edit 
</a>
<button class="button-delete" id="<%= restaurant.id %>"  title="Delete restaurant ...">
	Delete
</button>
<a class="button-home" href="/restaurants" title="List Restaurants">
	List Restaurants
</a>
